/*! For license information please see main.5b104cd8.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://studio-scheduler-3.preview.emergentagent.com","/api"),At=a.createContext(null),Dt=e=>{let{children:t}=e;const[n,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(localStorage.getItem("token"));(0,a.useEffect)((()=>{if(l){Rt.defaults.headers.common.Authorization="Bearer ".concat(l);const t=localStorage.getItem("user");if(t)try{r(JSON.parse(t))}catch(e){console.error("Failed to parse user data:",e),localStorage.removeItem("user"),localStorage.removeItem("token"),o(null)}}}),[l]);return(0,zt.jsx)(At.Provider,{value:{user:n,token:l,login:async(e,t)=>{try{const n=await Rt.post("".concat(Lt,"/auth/login"),{email:e,password:t}),{access_token:a,user:l}=n.data;return o(a),r(l),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(l)),Rt.defaults.headers.common.Authorization="Bearer ".concat(a),!0}catch(n){return console.error("Login failed:",n),!1}},register:async e=>{try{return await Rt.post("".concat(Lt,"/auth/register"),e),!0}catch(t){return console.error("Registration failed:",t),!1}},logout:()=>{r(null),o(null),localStorage.removeItem("token"),localStorage.removeItem("user"),delete Rt.defaults.headers.common.Authorization}},children:t})},Ft=()=>{const e=a.useContext(At);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Mt=e=>{let{children:t,className:n=""}=e;return(0,zt.jsx)("div",{className:"card ".concat(n),children:t})},Ut=e=>{let{children:t,onClick:n,className:r="",variant:a="primary",type:l="button",disabled:o=!1}=e;return(0,zt.jsx)("button",{type:l,onClick:n,disabled:o,className:"btn ".concat("outline"===a?"btn-outline":"btn-primary"," ").concat(r),children:t})},It=e=>{let{type:t="text",value:n,onChange:r,placeholder:a,className:l="",name:o,required:i=!1}=e;return(0,zt.jsx)("input",{type:t,value:n,onChange:r,placeholder:a,name:o,required:i,className:"input ".concat(l)})},Bt=e=>{let{isOpen:t,onClose:n,title:r,children:a}=e;return t?(0,zt.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,zt.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,zt.jsxs)("div",{className:"modal-header",children:[(0,zt.jsx)("h2",{children:r}),(0,zt.jsx)("button",{className:"modal-close",onClick:n,children:"\xd7"})]}),(0,zt.jsx)("div",{className:"modal-body",children:a})]})}):null},qt=()=>{const[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)({email:"",password:"",name:"",role:"owner",studio_name:""}),{login:l,register:o,token:i}=Ft(),s=e=>{r(c(c({},n),{},{[e.target.name]:e.target.value}))};return i?(0,zt.jsx)(Kt,{}):(0,zt.jsxs)("div",{className:"login-page",children:[(0,zt.jsx)("div",{className:"login-background"}),(0,zt.jsxs)(Mt,{className:"login-card",children:[(0,zt.jsx)("h2",{children:e?"Welcome Back":"Create Account"}),(0,zt.jsx)("p",{children:e?"Sign in to your studio account":"Set up your dance studio management"}),(0,zt.jsxs)("form",{onSubmit:async a=>{a.preventDefault();(e?await l(n.email,n.password):await o(n))&&!e&&(t(!0),r(c(c({},n),{},{password:""})),alert("Registration successful! Please login."))},className:"login-form",children:[!e&&(0,zt.jsxs)(zt.Fragment,{children:[(0,zt.jsx)(It,{name:"name",type:"text",placeholder:"Full Name",value:n.name,onChange:s,required:!0}),(0,zt.jsx)(It,{name:"studio_name",type:"text",placeholder:"Studio Name (optional)",value:n.studio_name,onChange:s}),(0,zt.jsxs)("select",{name:"role",value:n.role,onChange:s,className:"input",children:[(0,zt.jsx)("option",{value:"owner",children:"Studio Owner"}),(0,zt.jsx)("option",{value:"manager",children:"Manager"}),(0,zt.jsx)("option",{value:"teacher",children:"Teacher"})]})]}),(0,zt.jsx)(It,{name:"email",type:"email",placeholder:"Email",value:n.email,onChange:s,required:!0}),(0,zt.jsx)(It,{name:"password",type:"password",placeholder:"Password",value:n.password,onChange:s,required:!0}),(0,zt.jsx)(Ut,{type:"submit",className:"w-full",children:e?"Sign In":"Create Account"})]}),(0,zt.jsx)("div",{className:"login-switch",children:(0,zt.jsx)("button",{type:"button",onClick:()=>t(!e),children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})},Ht=e=>{let{onRefresh:t}=e;const[n,r]=(0,a.useState)(null);(0,a.useEffect)((()=>{l()}),[t]);const l=async()=>{try{const e=await Rt.get("".concat(Lt,"/dashboard/stats"));r(e.data)}catch(e){console.error("Failed to fetch stats:",e)}};return n?(0,zt.jsx)("div",{className:"dashboard",children:(0,zt.jsxs)("div",{className:"stats-grid",children:[(0,zt.jsx)(Mt,{className:"stat-card",children:(0,zt.jsxs)("div",{className:"stat-content",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"stat-number",children:n.total_students}),(0,zt.jsx)("p",{className:"stat-label",children:"Active Students"})]}),(0,zt.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"})]})}),(0,zt.jsx)(Mt,{className:"stat-card",children:(0,zt.jsxs)("div",{className:"stat-content",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"stat-number",children:n.total_teachers}),(0,zt.jsx)("p",{className:"stat-label",children:"Teachers"})]}),(0,zt.jsx)("div",{className:"stat-icon",children:"\ud83c\udfad"})]})}),(0,zt.jsx)(Mt,{className:"stat-card",children:(0,zt.jsxs)("div",{className:"stat-content",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"stat-number",children:n.active_enrollments}),(0,zt.jsx)("p",{className:"stat-label",children:"Active Enrollments"})]}),(0,zt.jsx)("div",{className:"stat-icon",children:"\ud83d\udcda"})]})}),(0,zt.jsx)(Mt,{className:"stat-card",children:(0,zt.jsxs)("div",{className:"stat-content",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"stat-number",children:n.lessons_today}),(0,zt.jsx)("p",{className:"stat-label",children:"Lessons Today"})]}),(0,zt.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc5"})]})}),(0,zt.jsx)(Mt,{className:"stat-card",children:(0,zt.jsxs)("div",{className:"stat-content",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsx)("p",{className:"stat-number",children:n.lessons_attended_today}),(0,zt.jsx)("p",{className:"stat-label",children:"Lessons Attended Today"})]}),(0,zt.jsx)("div",{className:"stat-icon",children:"\u2705"})]})}),(0,zt.jsx)(Mt,{className:"stat-card",children:(0,zt.jsxs)("div",{className:"stat-content",children:[(0,zt.jsxs)("div",{children:[(0,zt.jsxs)("p",{className:"stat-number",children:["$",n.estimated_monthly_revenue]}),(0,zt.jsx)("p",{className:"stat-label",children:"Monthly Revenue"})]}),(0,zt.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"})]})})]})}):(0,zt.jsx)("div",{children:"Loading..."})},Vt=e=>{let{selectedDate:t,onRefresh:n}=e;const[r,l]=(0,a.useState)(null),[o,i]=(0,a.useState)(null),[s,u]=(0,a.useState)(!1),[d,f]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[m,g]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[b,w]=(0,a.useState)({student_id:"",teacher_id:"",notes:"",enrollment_id:""}),S=[];for(let a=9;a<=21;a++)S.push(a);(0,a.useEffect)((()=>{k(),x()}),[t,n]);const k=async()=>{try{const e=t.toISOString().split("T")[0],n=await Rt.get("".concat(Lt,"/calendar/daily/").concat(e));l(n.data)}catch(e){console.error("Failed to fetch daily data:",e)}},x=async()=>{try{const e=await Rt.get("".concat(Lt,"/students"));v(e.data)}catch(e){console.error("Failed to fetch students:",e)}},E=e=>{g(e),w({student_id:e.student_id,teacher_id:e.teacher_id,notes:e.notes||"",enrollment_id:e.enrollment_id||""}),f(!0)},N=async e=>{if(window.confirm("Are you sure you want to delete this lesson?"))try{await Rt.delete("".concat(Lt,"/lessons/").concat(e)),k(),n()}catch(t){console.error("Failed to delete lesson:",t),alert("Failed to delete lesson")}},_=async e=>{try{await Rt.post("".concat(Lt,"/lessons/").concat(e,"/attend")),k(),n(),alert("Attendance marked successfully!")}catch(t){console.error("Failed to mark attendance:",t),alert("Failed to mark attendance")}},C=async(e,t)=>{try{await Rt.post("".concat(Lt,"/notifications/send-reminder"),{lesson_id:e,notification_type:t});alert("".concat(t.toUpperCase()," reminder sent successfully!"))}catch(a){var n,r;console.error("Failed to send reminder:",a),alert("Failed to send ".concat(t," reminder: ").concat((null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Unknown error"))}},j=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},P=e=>{let{lesson:t,onEdit:n,onDelete:r,onAttend:a,onSendReminder:l}=e;return(0,zt.jsxs)("div",{className:"lesson-block ".concat(t.is_attended?"attended":""),draggable:!0,onDragStart:e=>((e,t)=>{i(e),t.dataTransfer.effectAllowed="move"})(t,e),children:[(0,zt.jsxs)("div",{className:"lesson-content",children:[(0,zt.jsx)("div",{className:"lesson-student",children:t.student_name}),(0,zt.jsx)("div",{className:"lesson-time",children:new Date(t.start_datetime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),t.notes&&(0,zt.jsx)("div",{className:"lesson-notes",children:t.notes})]}),(0,zt.jsxs)("div",{className:"lesson-actions",children:[(0,zt.jsx)("button",{onClick:()=>n(t),className:"lesson-action-btn",title:"Edit",children:"\u270f\ufe0f"}),(0,zt.jsx)("button",{onClick:()=>r(t.id),className:"lesson-action-btn",title:"Delete",children:"\ud83d\uddd1\ufe0f"}),!t.is_attended&&(0,zt.jsx)("button",{onClick:()=>a(t.id),className:"lesson-action-btn",title:"Mark Attended",children:"\u2705"}),(0,zt.jsx)("button",{onClick:()=>l(t.id,"email"),className:"lesson-action-btn",title:"Send Email Reminder",children:"\ud83d\udce7"}),(0,zt.jsx)("button",{onClick:()=>l(t.id,"sms"),className:"lesson-action-btn",title:"Send SMS Reminder",children:"\ud83d\udcf1"})]})]})};return r?(0,zt.jsxs)("div",{className:"daily-calendar",children:[(0,zt.jsx)("div",{className:"calendar-header",children:(0,zt.jsxs)("h2",{children:["Daily Schedule - ",t.toDateString()]})}),(0,zt.jsxs)("div",{className:"calendar-grid",children:[(0,zt.jsxs)("div",{className:"time-column",children:[(0,zt.jsx)("div",{className:"time-header",children:"Time"}),S.map((e=>(0,zt.jsxs)("div",{className:"time-slot",children:[e>12?e-12:e,":00 ",e>=12?"PM":"AM"]},e)))]}),r.teachers.map((e=>(0,zt.jsxs)("div",{className:"teacher-column",children:[(0,zt.jsx)("div",{className:"teacher-header",children:e.name}),S.map((a=>{const l=((e,t)=>null!==r&&void 0!==r&&r.lessons?r.lessons.find((n=>new Date(n.start_datetime).getHours()===e&&n.teacher_id===t)):null)(a,e.id);return(0,zt.jsx)("div",{className:"calendar-slot",onClick:()=>!l&&((e,t)=>{h({hour:e,teacherId:t}),w({student_id:"",teacher_id:t,notes:"",enrollment_id:""}),u(!0)})(a,e.id),onDragOver:j,onDrop:r=>(async(e,r,a)=>{if(a.preventDefault(),o)try{const a=new Date(t);a.setHours(e,0,0,0);const l=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),c=String(e).padStart(2,"0"),d="".concat(l,"-").concat(s,"-").concat(u,"T").concat(c,":00:00");console.log("Moving lesson to:",d),await Rt.put("".concat(Lt,"/lessons/").concat(o.id),{teacher_id:r,start_datetime:d,duration_minutes:60}),i(null),k(),n()}catch(l){console.error("Failed to move lesson:",l),alert("Failed to move lesson")}})(a,e.id,r),children:l?(0,zt.jsx)(P,{lesson:l,onEdit:E,onDelete:N,onAttend:_,onSendReminder:C}):(0,zt.jsx)("div",{className:"empty-slot",children:"+"})},"".concat(e.id,"-").concat(a))}))]},e.id)))]}),(0,zt.jsx)(Bt,{isOpen:s,onClose:()=>u(!1),title:"Add Private Lesson",children:(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=new Date(t);e.setHours(p.hour,0,0,0);const r=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0"),o=String(p.hour).padStart(2,"0"),i="".concat(r,"-").concat(a,"-").concat(l,"T").concat(o,":00:00");console.log("Creating lesson for:",i),await Rt.post("".concat(Lt,"/lessons"),c(c({},b),{},{start_datetime:i,duration_minutes:60})),u(!1),k(),n()}catch(r){console.error("Failed to create lesson:",r),alert("Failed to create lesson")}},children:[(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Student"}),(0,zt.jsxs)("select",{value:b.student_id,onChange:e=>w(c(c({},b),{},{student_id:e.target.value})),required:!0,className:"input",children:[(0,zt.jsx)("option",{value:"",children:"Select Student"}),y.map((e=>(0,zt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Notes"}),(0,zt.jsx)("textarea",{value:b.notes,onChange:e=>w(c(c({},b),{},{notes:e.target.value})),placeholder:"Lesson notes...",className:"input",rows:"3"})]}),(0,zt.jsx)(Ut,{type:"submit",children:"Create Lesson"})]})}),(0,zt.jsx)(Bt,{isOpen:d,onClose:()=>f(!1),title:"Edit Private Lesson",children:(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.put("".concat(Lt,"/lessons/").concat(m.id),b),f(!1),k(),n()}catch(t){console.error("Failed to update lesson:",t),alert("Failed to update lesson")}},children:[(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Student"}),(0,zt.jsxs)("select",{value:b.student_id,onChange:e=>w(c(c({},b),{},{student_id:e.target.value})),required:!0,className:"input",children:[(0,zt.jsx)("option",{value:"",children:"Select Student"}),y.map((e=>(0,zt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Notes"}),(0,zt.jsx)("textarea",{value:b.notes,onChange:e=>w(c(c({},b),{},{notes:e.target.value})),placeholder:"Lesson notes...",className:"input",rows:"3"})]}),(0,zt.jsx)(Ut,{type:"submit",children:"Update Lesson"})]})})]}):(0,zt.jsx)("div",{children:"Loading calendar..."})},$t=e=>{let{onRefresh:t}=e;const[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),[g,y]=(0,a.useState)({email_enabled:!0,sms_enabled:!1,reminder_hours:24,email_address:"",phone_number:""}),[v,b]=(0,a.useState)({name:"",email:"",phone:"",parent_name:"",parent_phone:"",parent_email:"",notes:""}),[w,S]=(0,a.useState)({package_id:"",total_paid:""});(0,a.useEffect)((()=>{k(),x()}),[t]);const k=async()=>{try{const e=await Rt.get("".concat(Lt,"/students"));r(e.data)}catch(e){console.error("Failed to fetch students:",e)}},x=async()=>{try{const e=await Rt.get("".concat(Lt,"/packages"));o(e.data)}catch(e){console.error("Failed to fetch packages:",e)}};return(0,zt.jsxs)("div",{className:"students-manager",children:[(0,zt.jsxs)("div",{className:"manager-header",children:[(0,zt.jsx)("h2",{children:"Students"}),(0,zt.jsx)(Ut,{onClick:()=>s(!0),children:"Add Student"})]}),(0,zt.jsx)("div",{className:"students-grid",children:n.map((e=>(0,zt.jsxs)(Mt,{className:"student-card",children:[(0,zt.jsxs)("div",{className:"student-info",children:[(0,zt.jsx)("h3",{children:e.name}),(0,zt.jsxs)("p",{children:["\ud83d\udce7 ",e.email]}),e.phone&&(0,zt.jsxs)("p",{children:["\ud83d\udcf1 ",e.phone]}),e.parent_name&&(0,zt.jsxs)("p",{children:["\ud83d\udc64 Parent: ",e.parent_name]}),e.notes&&(0,zt.jsxs)("p",{children:["\ud83d\udcdd ",e.notes]})]}),(0,zt.jsxs)("div",{className:"student-actions",children:[(0,zt.jsx)(Ut,{variant:"outline",onClick:()=>(e=>{m(e),S({package_id:"",total_paid:""}),d(!0)})(e),children:"Enroll"}),(0,zt.jsx)(Ut,{variant:"outline",onClick:()=>(async e=>{m(e);try{const t=await Rt.get("".concat(Lt,"/notifications/preferences/").concat(e.id));y({email_enabled:t.data.email_enabled,sms_enabled:t.data.sms_enabled,reminder_hours:t.data.reminder_hours,email_address:t.data.email_address||e.email,phone_number:t.data.phone_number||e.phone})}catch(t){y({email_enabled:!0,sms_enabled:!1,reminder_hours:24,email_address:e.email,phone_number:e.phone||""})}p(!0)})(e),className:"notification-btn",children:"\ud83d\udcf1 Notifications"}),(0,zt.jsx)(Ut,{variant:"outline",onClick:()=>(async(e,n)=>{if(window.confirm("Are you sure you want to delete ".concat(n,"? This action cannot be undone.")))try{const n=await Rt.delete("".concat(Lt,"/students/").concat(e));alert(n.data.message),k(),t()}catch(r){console.error("Failed to delete student:",r),alert("Failed to delete student")}})(e.id,e.name),className:"delete-btn",children:"Delete"})]})]},e.id)))}),(0,zt.jsx)(Bt,{isOpen:i,onClose:()=>s(!1),title:"Add New Student",children:(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.post("".concat(Lt,"/students"),v),s(!1),k(),t(),b({name:"",email:"",phone:"",parent_name:"",parent_phone:"",parent_email:"",notes:""})}catch(n){console.error("Failed to add student:",n),alert("Failed to add student")}},className:"student-form",children:[(0,zt.jsx)(It,{placeholder:"Full Name",value:v.name,onChange:e=>b(c(c({},v),{},{name:e.target.value})),required:!0}),(0,zt.jsx)(It,{type:"email",placeholder:"Email",value:v.email,onChange:e=>b(c(c({},v),{},{email:e.target.value})),required:!0}),(0,zt.jsx)(It,{placeholder:"Phone Number",value:v.phone,onChange:e=>b(c(c({},v),{},{phone:e.target.value}))}),(0,zt.jsx)(It,{placeholder:"Parent/Guardian Name",value:v.parent_name,onChange:e=>b(c(c({},v),{},{parent_name:e.target.value}))}),(0,zt.jsx)(It,{placeholder:"Parent Phone",value:v.parent_phone,onChange:e=>b(c(c({},v),{},{parent_phone:e.target.value}))}),(0,zt.jsx)(It,{type:"email",placeholder:"Parent Email",value:v.parent_email,onChange:e=>b(c(c({},v),{},{parent_email:e.target.value}))}),(0,zt.jsx)("textarea",{placeholder:"Notes",value:v.notes,onChange:e=>b(c(c({},v),{},{notes:e.target.value})),className:"input",rows:"3"}),(0,zt.jsx)(Ut,{type:"submit",children:"Add Student"})]})}),(0,zt.jsx)(Bt,{isOpen:u,onClose:()=>d(!1),title:"Enroll ".concat(null===h||void 0===h?void 0:h.name),children:(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.post("".concat(Lt,"/enrollments"),{student_id:h.id,package_id:w.package_id,total_paid:parseFloat(w.total_paid)}),d(!1),t(),alert("Enrollment created successfully!")}catch(n){console.error("Failed to create enrollment:",n),alert("Failed to create enrollment")}},children:[(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Lesson Package"}),(0,zt.jsxs)("select",{value:w.package_id,onChange:e=>{const t=l.find((t=>t.id===e.target.value));S({package_id:e.target.value,total_paid:(null===t||void 0===t?void 0:t.price)||""})},required:!0,className:"input",children:[(0,zt.jsx)("option",{value:"",children:"Select Package"}),l.map((e=>(0,zt.jsxs)("option",{value:e.id,children:[e.name," - ",e.total_lessons," lessons - $",e.price]},e.id)))]})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Total Paid"}),(0,zt.jsx)(It,{type:"number",step:"0.01",placeholder:"Amount paid",value:w.total_paid,onChange:e=>S(c(c({},w),{},{total_paid:e.target.value})),required:!0})]}),(0,zt.jsx)(Ut,{type:"submit",children:"Create Enrollment"})]})}),(0,zt.jsx)(Bt,{isOpen:f,onClose:()=>p(!1),title:"Notification Preferences".concat(h?" - ".concat(h.name):""),children:(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.post("".concat(Lt,"/notifications/preferences"),c({student_id:h.id},g)),p(!1),alert("Notification preferences updated successfully!")}catch(t){console.error("Failed to update notification preferences:",t),alert("Failed to update notification preferences")}},children:[(0,zt.jsx)("div",{className:"form-group",children:(0,zt.jsxs)("label",{className:"checkbox-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:g.email_enabled,onChange:e=>y(c(c({},g),{},{email_enabled:e.target.checked}))}),(0,zt.jsx)("span",{children:"\ud83d\udce7 Enable Email Reminders"})]})}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Email Address"}),(0,zt.jsx)(It,{type:"email",value:g.email_address,onChange:e=>y(c(c({},g),{},{email_address:e.target.value})),placeholder:"Email for reminders"})]}),(0,zt.jsx)("div",{className:"form-group",children:(0,zt.jsxs)("label",{className:"checkbox-label",children:[(0,zt.jsx)("input",{type:"checkbox",checked:g.sms_enabled,onChange:e=>y(c(c({},g),{},{sms_enabled:e.target.checked}))}),(0,zt.jsx)("span",{children:"\ud83d\udcf1 Enable SMS Reminders"})]})}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Phone Number"}),(0,zt.jsx)(It,{type:"tel",value:g.phone_number,onChange:e=>y(c(c({},g),{},{phone_number:e.target.value})),placeholder:"+1234567890"})]}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Reminder Time"}),(0,zt.jsxs)("select",{value:g.reminder_hours,onChange:e=>y(c(c({},g),{},{reminder_hours:parseInt(e.target.value)})),className:"input",children:[(0,zt.jsx)("option",{value:1,children:"1 hour before"}),(0,zt.jsx)("option",{value:2,children:"2 hours before"}),(0,zt.jsx)("option",{value:4,children:"4 hours before"}),(0,zt.jsx)("option",{value:24,children:"24 hours before"}),(0,zt.jsx)("option",{value:48,children:"48 hours before"})]})]}),(0,zt.jsx)(Ut,{type:"submit",children:"Save Preferences"})]})})]})},Wt=e=>{let{onRefresh:t}=e;const[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)({name:"",email:"",phone:"",specialties:[],bio:""});(0,a.useEffect)((()=>{u()}),[t]);const u=async()=>{try{const e=await Rt.get("".concat(Lt,"/teachers"));r(e.data)}catch(e){console.error("Failed to fetch teachers:",e)}};return(0,zt.jsxs)("div",{className:"teachers-manager",children:[(0,zt.jsxs)("div",{className:"manager-header",children:[(0,zt.jsx)("h2",{children:"Teachers"}),(0,zt.jsx)(Ut,{onClick:()=>o(!0),children:"Add Teacher"})]}),(0,zt.jsx)("div",{className:"teachers-grid",children:n.map((e=>(0,zt.jsxs)(Mt,{className:"teacher-card",children:[(0,zt.jsxs)("div",{className:"teacher-info",children:[(0,zt.jsx)("h3",{children:e.name}),(0,zt.jsxs)("p",{children:["\ud83d\udce7 ",e.email]}),e.phone&&(0,zt.jsxs)("p",{children:["\ud83d\udcf1 ",e.phone]}),(0,zt.jsx)("div",{className:"specialties",children:e.specialties.map((e=>(0,zt.jsx)("span",{className:"specialty-badge",children:e.replace("_"," ")},e)))}),e.bio&&(0,zt.jsx)("p",{className:"teacher-bio",children:e.bio})]}),(0,zt.jsx)("div",{className:"teacher-actions",children:(0,zt.jsx)(Ut,{variant:"outline",onClick:()=>(async(e,n)=>{if(window.confirm("Are you sure you want to delete ".concat(n,"? This action cannot be undone.")))try{const n=await Rt.delete("".concat(Lt,"/teachers/").concat(e));alert(n.data.message),u(),t()}catch(r){console.error("Failed to delete teacher:",r),alert("Failed to delete teacher")}})(e.id,e.name),className:"delete-btn",children:"Delete"})})]},e.id)))}),(0,zt.jsx)(Bt,{isOpen:l,onClose:()=>o(!1),title:"Add New Teacher",children:(0,zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.post("".concat(Lt,"/teachers"),i),o(!1),u(),t(),s({name:"",email:"",phone:"",specialties:[],bio:""})}catch(n){console.error("Failed to add teacher:",n),alert("Failed to add teacher")}},className:"teacher-form",children:[(0,zt.jsx)(It,{placeholder:"Full Name",value:i.name,onChange:e=>s(c(c({},i),{},{name:e.target.value})),required:!0}),(0,zt.jsx)(It,{type:"email",placeholder:"Email",value:i.email,onChange:e=>s(c(c({},i),{},{email:e.target.value})),required:!0}),(0,zt.jsx)(It,{placeholder:"Phone Number",value:i.phone,onChange:e=>s(c(c({},i),{},{phone:e.target.value}))}),(0,zt.jsxs)("div",{className:"form-group",children:[(0,zt.jsx)("label",{children:"Specialties"}),(0,zt.jsx)("div",{className:"specialties-selector",children:["ballet","hip_hop","jazz","contemporary","tap","salsa","ballroom"].map((e=>(0,zt.jsxs)("label",{className:"specialty-option",children:[(0,zt.jsx)("input",{type:"checkbox",checked:i.specialties.includes(e),onChange:()=>(e=>{const t=i.specialties.includes(e)?i.specialties.filter((t=>t!==e)):[...i.specialties,e];s(c(c({},i),{},{specialties:t}))})(e)}),(0,zt.jsx)("span",{children:e.replace("_"," ")})]},e)))})]}),(0,zt.jsx)("textarea",{placeholder:"Bio (optional)",value:i.bio,onChange:e=>s(c(c({},i),{},{bio:e.target.value})),className:"input",rows:"3"}),(0,zt.jsx)(Ut,{type:"submit",children:"Add Teacher"})]})})]})},Qt=e=>{let{selectedDate:t,onRefresh:n}=e;const[r,l]=(0,a.useState)([]);(0,a.useEffect)((()=>{o()}),[t,n]);const o=async()=>{try{i(t);const e=(await Rt.get("".concat(Lt,"/lessons"))).data.filter((e=>{const n=new Date(e.start_datetime),r=i(t),a=new Date(r);return a.setDate(a.getDate()+6),n>=r&&n<=a}));l(e)}catch(e){console.error("Failed to fetch weekly lessons:",e)}},i=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(0===n?-6:1);return t.setDate(r),t.setHours(0,0,0,0),t},s=i(t),u=(e=>{const t=[];for(let n=0;n<7;n++){const r=new Date(e);r.setDate(e.getDate()+n),t.push(r)}return t})(s);return(0,zt.jsxs)("div",{className:"weekly-calendar",children:[(0,zt.jsxs)("div",{className:"week-header",children:[(0,zt.jsx)("h2",{children:"Weekly Schedule"}),(0,zt.jsxs)("p",{children:[s.toDateString()," - ",u[6].toDateString()]})]}),(0,zt.jsx)("div",{className:"week-grid",children:u.map((e=>{const t=(e=>r.filter((t=>new Date(t.start_datetime).toDateString()===e.toDateString())))(e);return(0,zt.jsxs)("div",{className:"day-column",children:[(0,zt.jsxs)("div",{className:"day-header",children:[(0,zt.jsx)("div",{className:"day-name",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,zt.jsx)("div",{className:"day-number",children:e.getDate()})]}),(0,zt.jsx)("div",{className:"day-lessons",children:t.map((e=>(0,zt.jsxs)("div",{className:"week-lesson ".concat(e.is_attended?"attended":""),children:[(0,zt.jsx)("div",{className:"lesson-time",children:new Date(e.start_datetime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),(0,zt.jsx)("div",{className:"lesson-student",children:e.student_name}),(0,zt.jsx)("div",{className:"lesson-teacher",children:e.teacher_name})]},e.id)))})]},e.toDateString())}))})]})},Kt=()=>{const{user:e,logout:t}=Ft(),[n,r]=(0,a.useState)("dashboard"),[l,o]=(0,a.useState)(new Date),[i,s]=(0,a.useState)(0),u=()=>{s((e=>e+1))};return e?(0,zt.jsxs)("div",{className:"main-app",children:[(0,zt.jsxs)("nav",{className:"sidebar",children:[(0,zt.jsxs)("div",{className:"sidebar-header",children:[(0,zt.jsx)("h1",{children:"CRM.Dance"}),(0,zt.jsx)("p",{children:e.name||"User"}),(0,zt.jsx)("p",{className:"user-role",children:e.role||"user"})]}),(0,zt.jsxs)("div",{className:"nav-menu",children:[(0,zt.jsx)("button",{className:"dashboard"===n?"nav-item active":"nav-item",onClick:()=>r("dashboard"),children:"\ud83d\udcca Dashboard"}),(0,zt.jsx)("button",{className:"daily"===n?"nav-item active":"nav-item",onClick:()=>r("daily"),children:"\ud83d\udcc5 Daily Calendar"}),(0,zt.jsx)("button",{className:"weekly"===n?"nav-item active":"nav-item",onClick:()=>r("weekly"),children:"\ud83d\uddd3\ufe0f Weekly Calendar"}),(0,zt.jsx)("button",{className:"students"===n?"nav-item active":"nav-item",onClick:()=>r("students"),children:"\ud83d\udc65 Students"}),(0,zt.jsx)("button",{className:"teachers"===n?"nav-item active":"nav-item",onClick:()=>r("teachers"),children:"\ud83c\udfad Teachers"})]}),(0,zt.jsxs)("div",{className:"sidebar-footer",children:[(0,zt.jsx)("input",{type:"date",value:l.toISOString().split("T")[0],onChange:e=>o(new Date(e.target.value)),className:"date-picker"}),(0,zt.jsx)(Ut,{variant:"outline",onClick:t,children:"Sign Out"})]})]}),(0,zt.jsxs)("main",{className:"main-content",children:["dashboard"===n&&(0,zt.jsx)(Ht,{onRefresh:i}),"daily"===n&&(0,zt.jsx)(Vt,{selectedDate:l,onRefresh:u}),"weekly"===n&&(0,zt.jsx)(Qt,{selectedDate:l,onRefresh:i}),"students"===n&&(0,zt.jsx)($t,{onRefresh:u}),"teachers"===n&&(0,zt.jsx)(Wt,{onRefresh:u})]})]}):(0,zt.jsx)("div",{className:"loading",children:"Loading..."})};const Xt=function(){return(0,zt.jsx)("div",{className:"App",children:(0,zt.jsx)(Dt,{children:(0,zt.jsx)(qt,{})})})};l.createRoot(document.getElementById("root")).render((0,zt.jsx)(a.StrictMode,{children:(0,zt.jsx)(Xt,{})}))})();
//# sourceMappingURL=main.5b104cd8.js.map